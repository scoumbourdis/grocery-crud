/* jQuery Numeric v1.3.1 | http://www.texotela.co.uk/code/jquery/numeric/ */
(function(d){d.fn.numeric=function(a,c){"boolean"===typeof a&&(a={decimal:a});a=a||{};"undefined"==typeof a.negative&&(a.negative=!0);var f=!1===a.decimal?"":a.decimal||".",b=!0===a.negative?!0:!1;return this.data("numeric.decimal",f).data("numeric.negative",b).data("numeric.callback","function"==typeof c?c:function(){}).keypress(d.fn.numeric.keypress).keyup(d.fn.numeric.keyup).blur(d.fn.numeric.blur)};d.fn.numeric.keypress=function(a){var c=d.data(this,"numeric.decimal"),f=d.data(this,"numeric.negative"),b=a.charCode?a.charCode:a.keyCode?a.keyCode:0;if(13==b&&"input"==this.nodeName.toLowerCase())return!0;if(13==b)return!1;var e=!1;if(a.ctrlKey&&97==b||a.ctrlKey&&65==b||a.ctrlKey&&120==b||a.ctrlKey&&88==b||a.ctrlKey&&99==b||a.ctrlKey&&67==b||a.ctrlKey&&122==b||a.ctrlKey&&90==b||a.ctrlKey&&118==b||a.ctrlKey&&86==b||a.shiftKey&&45==b)return!0;if(48>b||57<b){var h=d(this).val();if(0!==h.indexOf("-")&&f&&45==b&&(0===h.length||0===parseInt(d.fn.getSelectionStart(this),10)))return!0;c&&(b==c.charCodeAt(0)&&-1!=h.indexOf(c))&&(e=!1);8!=b&&9!=b&&13!=b&&35!=b&&36!=b&&37!=b&&39!=b&&46!=b?e=!1:"undefined"!=typeof a.charCode&&(a.keyCode==a.which&&0!==a.which?(e=!0,46==a.which&&(e=!1)):0!==a.keyCode&&(0===a.charCode&&0===a.which)&&(e=!0));c&&b==c.charCodeAt(0)&&(e=-1==h.indexOf(c)?!0:!1)}else e=!0;return e};d.fn.numeric.keyup=function(){var a=d(this).value;if(a&&0<a.length){var c=d.fn.getSelectionStart(this),f=d.data(this,"numeric.decimal"),b=d.data(this,"numeric.negative");if(""!==f&&null!==f){var e=a.indexOf(f);0===e&&(this.value="0"+a);1==e&&"-"==a.charAt(0)&&(this.value="-0"+a.substring(1));a=this.value}for(var h=[0,1,2,3,4,5,6,7,8,9,"-",f],e=a.length,g=e-1;0<=g;g--){var i=a.charAt(g);0!==g&&"-"==i?a=a.substring(0,g)+a.substring(g+1):0===g&&(!b&&"-"==i)&&(a=a.substring(1));for(var k=!1,j=0;j<h.length;j++)if(i==h[j]){k=!0;break}if(!k||" "==i)a=a.substring(0,g)+a.substring(g+1)}b=a.indexOf(f);if(0<b)for(e-=1;e>b;e--)a.charAt(e)==f&&(a=a.substring(0,e)+a.substring(e+1));this.value=a;d.fn.setSelection(this,c)}};d.fn.numeric.blur=function(){var a=d.data(this,"numeric.decimal"),c=d.data(this,"numeric.callback"),f=this.value;""!==f&&(RegExp("^\\d+$|^\\d*"+a+"\\d+$").exec(f)||c.apply(this))};d.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",d.fn.numeric.keypress).unbind("blur",d.fn.numeric.blur)};d.fn.getSelectionStart=function(a){if(a.createTextRange){var c=document.selection.createRange().duplicate();c.moveEnd("character",a.value.length);return""===c.text?a.value.length:a.value.lastIndexOf(c.text)}return a.selectionStart};d.fn.setSelection=function(a,c){"number"==typeof c&&(c=[c,c]);if(c&&c.constructor==Array&&2==c.length)if(a.createTextRange){var d=a.createTextRange();d.collapse(!0);d.moveStart("character",c[0]);d.moveEnd("character",c[1]);d.select()}else a.setSelectionRange&&(a.focus(),a.setSelectionRange(c[0],c[1]))}})(jQuery);